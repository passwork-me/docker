version: '3.6'

services:

   nginx:
#     build: ./nginx
     image: passwork/nginx
     container_name: nginx
     networks:
       - passwork
     depends_on:
            - "php"
            - "db"

   db:
#     build: ./mongo
     image: passwork/mongodb
     container_name: db
     networks:
       - passwork

   php:
     build:
       context: ./php-fpm
       args:
         HTTP_PROXY: ${http_proxy:-}
         HTTPS_PROXY: ${http_proxy:-}
         http_proxy: ${http_proxy:-}
         https_proxy: ${http_proxy:-}
         no_proxy: ${no_proxy:-}
     image: passwork/php-fpm
     container_name: php
     networks:
       - passwork

   postfix:
#     build: ./postfix
     image: passwork/postfix
     container_name: postfix     
     networks:
       - passwork
     depends_on:
            - "nginx"

networks:
  passwork:
    driver: bridge
